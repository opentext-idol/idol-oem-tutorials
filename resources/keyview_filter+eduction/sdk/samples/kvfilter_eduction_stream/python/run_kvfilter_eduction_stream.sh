#!/bin/sh
VERSION=25.4.0
PLATFORM=LINUX_X86_64

KEYVIEW_FILTERSDK_HOME=/opt/OpenText/KeyviewFilterSDK_${VERSION}_${PLATFORM}
KEYVIEW_EXPORTSDK_HOME=/opt/OpenText/KeyviewExportSDK_${VERSION}_${PLATFORM}
IDOL_OEM_TUTORIALS_HOME=/opt/OpenText/idol-oem-tutorials

EDK_HOME=/opt/OpenText/EductionSDK_${VERSION}_${PLATFORM%}

#PYTHON_HOME=

EDKLIBPATH=${EDK_HOME}/bin/libedk.so
export EDKLIBPATH

KV_SAMPLE_PROGRAM_LICENSE_FROM_FILEPATH=${KEYVIEW_FILTERSDK_HOME}/licensekey.dat
EDK_SAMPLE_PROGRAM_LICENSE_FROM_FILEPATH=${EDK_HOME}/licensekey.dat
EDK_SAMPLE_PROGRAM_VERSIONKEY_FROM_FILEPATH=${EDK_HOME}/versionkey.dat
export KV_SAMPLE_PROGRAM_LICENSE_FROM_FILEPATH
export EDK_SAMPLE_PROGRAM_LICENSE_FROM_FILEPATH
export EDK_SAMPLE_PROGRAM_VERSIONKEY_FROM_FILEPATH

CONFIG=test/config/test.cfg
INPUT_FILEPATH=test/input/input.pdf
#INPUT_FILEPATH=${IDOL_OEM_TUTORIALS_HOME/resources/keyview_filter/2022_calendar_HIDDEN_TEXT.docx
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/Annual_Report.docx
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/freezer2.ppt
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/FreshDinner.doc
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/frshfrozen.xls
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/Investment_Portfolio.xlsx
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/Report_Template.pdf
#INPUT_FILEPATH=${KEYVIEW_EXPORTSDK_HOME}/testdocs/SquaresLetterHead.tiff

ORIG=`pwd`

OUTPUT=${ORIG}/educed.EDK.JSON
rm ${OUTPUT}

cd ../resources

python3 ${ORIG}/kvfilter_eduction_stream.py ${KEYVIEW_FILTERSDK_HOME}/${PLATFORM}/bin ${CONFIG} ${INPUT_FILEPATH} ${OUTPUT}

cd ${ORIG}
